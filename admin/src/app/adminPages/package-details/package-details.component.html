<section>
    <div class="container">
        <div class="card mb-4 rounded-1 shadow-sm">
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 align-self-center text-center text-md-start mb-3 mb-md-0">
                        <h3 class="mb-0 fw-bold themColor">Our Packages Details</h3>
                    </div>
                    <div class="col-md-6 text-center text-sm-end">
                        <button type="button" class="btn btn-primary themeButton btn-lg rounded-1" (click)="openAddModal()">
                            <i class="fa-solid fa-plus"></i> Add New Package Details
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loader -->
        <div *ngIf="isLoading" class="text-center my-5">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>

        <!-- Packages Grid -->
        <div class="row" *ngIf="!isLoading && packageList.length > 0">
            <div class="col-lg-4 mb-4" *ngFor="let pkg of packageList">
                <div class="pricing-box rounded-5 position-relative pt-5 pb-3 px-4 border bg-light h-100">
                    <img src="assets/images/airplane.png" width="80" alt="Icon Airplane" class="position-absolute top-0 end-0 mt-3 me-3 opacity-50">
                    <h4 class="fw-bold themColor">{{ pkg.title }}</h4>
                    <div class="pricing-plan d-flex align-items-center my-4">
                        <h4 class="themColor fw-bold">
                            <span class="plan pe-2">INR {{ pkg.price }}/-</span>
                        </h4>
                        <p class="text-muted mb-0">For {{ pkg.days }} Days</p>
                    </div>
                    <div class="lh-lg mb-4">
                        <p class="mb-2">
                            <i class="fa-solid fa-circle-check text-success me-2"></i>
                            <b>Departure Date</b> - <span>{{ pkg.departure_date | date: 'd MMM y' }}</span>
                        </p>
                        <p class="mb-2">
                            <i class="fa-solid fa-circle-check text-success me-2"></i>
                            {{ pkg.departure_location }}
                        </p>
                        <p class="mb-2">
                            <i class="fa-solid fa-circle-check text-success me-2"></i>
                            <b>Arrival Date</b> - <span>{{ pkg.arrival_date | date: 'd MMM y' }}</span>
                        </p>
                        <p class="mb-2">
                            <i class="fa-solid fa-circle-check text-success me-2"></i>
                            {{ pkg.arrival_location }}
                        </p>
                        <p class="mb-2">
                            <i class="fa-solid fa-circle-check text-success me-2"></i>
                            <b>Airline â€“</b> {{ pkg.airline }}
                        </p>
                        <p class="mb-2" *ngIf="pkg.hotel_distance_1">
                            <i class="fa-solid fa-circle-check text-success me-2"></i>
                            <b>Makkah Hotel Distance</b> - {{ pkg.hotel_distance_1 }}
                        </p>
                        <p class="mb-2" *ngIf="pkg.hotel_distance_2">
                            <i class="fa-solid fa-circle-check text-success me-2"></i>
                            <b>Madinah Hotel Distance</b> - {{ pkg.hotel_distance_2 }}
                        </p>
                    </div>

                    <div *ngIf="pkg.description">
                        <h6 class="mb-2 fw-bold text-muted">Description</h6>
                        <p class="text-muted mb-0">
                            {{ pkg.description }}
                        </p>
                    </div>

                    <div class="card-footer d-flex justify-content-between pt-3 mt-3 border-top">
                        <button class="btn btn-primary btn-sm rounded-1" (click)="openEditModal(pkg.id)">
                            Edit <i class="fa-solid fa-pen-to-square"></i>
                        </button>
                    
                        <button type="button" class="btn btn-danger btn-sm rounded-1" (click)="confirmDelete(pkg.id)">
                            Delete <i class="fa-solid fa-trash-can"></i>
                        </button>
                    </div>

                </div>
            </div>
        </div>

        <!-- No Data Found -->
        <div *ngIf="!isLoading && packageList.length === 0" class="text-center text-muted my-5">
            No package details found.
        </div>


    </div>
</section>

<!-- Delete Confirmation Modal -->
<ng-template #confirmDeleteModal let-modal>
    <div class="modal-header">
        <h5 class="modal-title text-danger">
            <i class="fa-solid fa-triangle-exclamation me-2"></i>
            Confirm Delete
        </h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        Are you sure you want to delete this package details?
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary btn-sm rounded-1" (click)="modal.dismiss()">Cancel</button>
        <button type="button" class="btn btn-danger btn-sm rounded-1" (click)="deletePackage()">Delete</button>
    </div>
</ng-template>
